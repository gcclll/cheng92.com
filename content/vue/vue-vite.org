#+TITLE: Vue3 -> Vite 脚手架
#+DATE: <2021-02-25 17:25:02>
#+TAGS[]: vue3, vite
#+CATEGORIES[]: vue
#+LANGUAGE: zh-cn
#+STARTUP: indent

* import.meta

类型声明：

#+begin_src typescript
interface ImportMeta {
  url: string

  readonly hot?: {
    readonly data: any

    accept(): void
    accept(cb: (mod: any) => void): void
    accept(dep: string, cb: (mod: any) => void): void
    accept(deps: readonly string[], cb: (mods: any[]) => void): void

    /**
     * @deprecated
     */
    acceptDeps(): never

    dispose(cb: (data: any) => void): void
    decline(): void
    invalidate(): void

    on(event: string, cb: (...args: any[]) => void): void
  }

  readonly env: ImportMetaEnv

  glob(
    pattern: string
  ): Record<
    string,
    () => Promise<{
      [key: string]: any
    }>
  >

  globEager(
    pattern: string
  ): Record<
    string,
    {
      [key: string]: any
    }
  >
}
interface ImportMetaEnv {
  [key: string]: string | boolean | undefined
  BASE_URL: string
  MODE: string
  DEV: boolean
  PROD: boolean
}
#+end_src

实际项目输出结果：
#+begin_src js
// import.meta
import.meta.env = {
  url: "https://localhost:3000/src/main.ts",
  env: {
    BASE_URL: "/",
    MODE: "development",
    DEV: true,
    PROD: false,
    SSR: false,
  },
};
#+end_src
