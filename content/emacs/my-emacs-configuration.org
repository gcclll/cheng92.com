#+TITLE: My Emacs(Spacemacs) Configuration
#+DATE: <2020-08-27 14:20:16>
#+TAGS[]: emacs
#+CATEGORIES[]: emacs
#+LANGUAGE: zh-cn
#+STARTUP: indent


* Doom-emacs

感觉 Spacemacs 用起来还是有点卡，且启动慢，用久了更卡了，只能怪自己太菜了，所以今天开始尝试转向 [[https://github.com/hlissner/doom-emacs][doom-emacs]]

配置列表：

1. https://github.com/rschmukler/doom.d
2. https://rgoswami.me/dotdoom/config.html
3. https://github.com/hlissner/doom-emacs-private
4. 主题：https://github.com/hlissner/emacs-doom-themes

** Base Configuration/Operation
*** 重新加载配置

| key       | mode            | function                     |
|-----------+-----------------+------------------------------|
| ~gr~      | evil 选中模式下 | 执行选中代码                 |
| ~C-x C-e~ | -               | ~eval-last-sexp~             |
| ~SPC c e~ | -               | ~M-x +eval/buffer-or-region~ |

** packages
*** smart-hungry-delete

https://github.com/hrehfeld/emacs-smart-hungry-delete

#+BEGIN_SRC elisp
(use-package smart-hungry-delete
  :ensure t
  :bind (("<backspace>" . smart-hungry-delete-backward-char)
		 ("C-d" . smart-hungry-delete-forward-char))
  :defer nil ;; dont defer so we can add our functions to hooks 
  :config (smart-hungry-delete-add-default-hooks)
  )
#+END_SRC

** Keybindings
*** test
key 绑定函数：
- define-key
- global-set-key
- map!
- undefined-key!
- define-key!

#+BEGIN_SRC elisp :eval no
;; bind a global key
(global-set-key (kbd "C-x y") #'do-something)
(map! "C-x y" #'do-something)

;; bind a key on a keymap
(define-key emacs-lisp-mode-map (kbd "C-c p") #'do-something)
(map! :map emacs-lisp-mode-map "C-c p" #'do-something)

;; unbind a key defined elsewhere
(define-key lua-mode-map (kbd "SPC m b") nil)
(map! :map lua-mode-map "SPC m b" nil)

;; bind multiple keys
(global-set-key (kbd "C-x x") #'do-something)
(global-set-key (kbd "C-x y") #'do-something-else)
(global-set-key (kbd "C-x z") #'do-another-thing)
(map! "C-x x" #'do-something
      "C-x y" #'do-something-else
      "C-x z" #'do-another-thing)

;; bind global keys in normal mode
(evil-define-key* 'normal 'global
  (kbd "C-x x") #'do-something
  (kbd "C-x y") #'do-something-else
  (kbd "C-x z") #'do-another-thing)
(map! :n "C-x x" #'do-something
      :n "C-x y" #'do-something-else
      :n "C-x z" #'do-another-thing)

;; or on a deferred keymap
(evil-define-key 'normal emacs-lisp-mode-map
  (kbd "C-x x") #'do-something
  (kbd "C-x y") #'do-something-else
  (kbd "C-x z") #'do-another-thing)
(map! :map emacs-lisp-mode-map
      :n "C-x x" #'do-something
      :n "C-x y" #'do-something-else
      :n "C-x z" #'do-another-thing)

;; or multiple maps
(dolist (map (list emacs-lisp-mode go-mode-map ivy-minibuffer-map))
  (evil-define-key '(normal insert) map
    "a" #'a
    "b" #'b
    "c" #'c))
(map! :map (emacs-lisp-mode go-mode-map ivy-minibuffer-map)
      :ni "a" #'a
      :ni "b" #'b
      :ni "c" #'c)

;; or in multiple states (order of states doesn't matter)
(evil-define-key* '(normal visual) emacs-lisp-mode-map (kbd "C-x x") #'do-something)
(evil-define-key* 'insert emacs-lisp-mode-map (kbd "C-x x") #'do-something-else)
(evil-define-key* '(visual normal insert emacs) emacs-lisp-mode-map (kbd "C-x z") #'do-another-thing)
(map! :map emacs-lisp-mode
      :nv   "C-x x" #'do-something      ; normal+visual
      :i    "C-x y" #'do-something-else ; insert
      :vnie "C-x z" #'do-another-thing) ; visual+normal+insert+emacs

;; You can nest map! calls:
(evil-define-key* '(normal visual) emacs-lisp-mode-map (kbd "C-x x") #'do-something)
(evil-define-key* 'normal go-lisp-mode-map (kbd "C-x x") #'do-something-else)
(map! (:map emacs-lisp-mode :nv "C-x x" #'do-something)
      (:map go-lisp-mode    :n  "C-x x" #'do-something-else))
#+END_SRC
*** smartparen 括号操作

| key   | function               | description      |
|-------+------------------------+------------------|
| ~z [~ | sp-wrap-square         | replace with ~S~ |
| ~z (~ | sp-wrap-round          | replace with ~S~ |
| ~z {~ | sp-wrap-curly          | replace with ~S~ |
| ~z -~ | sp-splice-sexp         | -                |
| ~z .~ | emmet-wrap-with-markup | -                |
|-------+------------------------+------------------|
| =C-(= | sp-backward-slurp-sexp |                  |
| =C-)= | sp-forward-slurp-sexp  |                  |
| =s-(= | sp-backward-barf-sexp  |                  |
| =s-)= | sp-forward-barf-sexp   |                  |
| =C-{= | sp-backward-sexp       |                  |
| =C-}= | sp-forward-sexp        |                  |

*** usefull
常用按键：

| key       | function                        | description                      |
|-----------+---------------------------------+----------------------------------|
| ~K~       | ~+lookup/documentation~         | search google/github/youtube/... |
| ~S~       | ~evil-snipe-S~                  | wrap with char in select mode    |
|-----------+---------------------------------+----------------------------------|
| ~M-u~     | ~upcase~                        |                                  |
| ~M-l~     | ~downcase~                      |                                  |
| ~M-c~     | ~capitalize-word~               |                                  |
|-----------+---------------------------------+----------------------------------|
| ~SPC '~   | ~ivy-resume~                    | resume last search results       |
| ~SPC b O~ | ~kill-other-buffers~            | -                                |
| ~SPC s o~ | ~+lookup/online~                |                                  |
| ~SPC l m~ | ~lsp-ui-imenu~                  | -                                |
| ~SPC l t~ | ~treemacs~                      |                                  |
|-----------+---------------------------------+----------------------------------|
| ~C-=~     | ~er/expand-region~              |                                  |
| ~C-+~     | ~text-scale-increase~           |                                  |
| ~C-c r~   | ~vr/replace~                    |                                  |
| ~C-c q~   | ~vr/query-replace~              |                                  |
|-----------+---------------------------------+----------------------------------|
| ~g0~      | ~evil-beginning-of-visual-line~ | -                                |
| ~g-~      | ~evil-numbers/dec-at-pt~        | decrement number under cursor    |
| ~g=~      | ~evil-numbers/inc-at-pt~        | increase number under cursor     |
| ~gd~      | ~+lookup/definition~            | -                                |
| ~gt~      | ~+workspace:switch-next~        | -                                |
| ~gD~      | ~+lookup/references~            | -                                |
| ~gx~      | ~evil-exchange~                 | exchange two regions             |
| ~g~~      | ~evil-invert-case~              | invert case(down-up)             |
|           |                                 |                                  |

*** org-mode
| key   | function        | description       |
|-------+-----------------+-------------------|
| ~M-l~ | ~org-metaright~ | move column right |
| ~M-h~ | ~org-metaleft~  | move column left  |
| ~M-j~ | ~org-metadown~  | move row down     |
| ~M-k~ | ~org-metaup~    | move row up       |
| ~M-u~ | ~upcase-word~   | -                 |
| ~gu~  | ~evil-downcase~ | -                 |
| ~gU~  | ~evil-upcase~   |                   |

test word
*** +workspace

| key           | function                  | description                |
|---------------+---------------------------+----------------------------|
| ~SPC TAB 0-9~ | -                         | +workspaces switch to(0-9) |
| ~SPC TAB .~   | ~+workspace/switch~       | -                          |
| ~SPC TAB [~   | ~+workspace/previous~     | -                          |
| ~SPC TAB ]~   | ~+workspace/next~         | -                          |
| ~SPC TAB `~   | ~+workspace/last~         | -                          |
| ~SPC TAB d~   | ~+workspace/delete~       | delete this workspace      |
| ~SPC TAB l~   | ~+workspace/load~         | -                          |
| ~SPC TAB n~   | ~+workspace/new~          | -                          |
| ~SPC TAB r~   | ~+workspace/rename~       | -                          |
| ~SPC TAB s~   | ~+workspace/save~         | -                          |
| ~SPC TAB x~   | ~+workspace/kill-session~ | -                          |
| ~SPC TAB R~   | ~+workspace/restore-last~ | -                          |

*** evil-mode
**** g(go, jump)

| key              | function                                      | description                      |
|------------------+-----------------------------------------------+----------------------------------|
| ~ga~             | ~what-cursor-position~                        | -                                |
| ~gj~             | ~org-forward-heading-same-level~              | last same level header           |
| ~gk~             | ~org-backward-heading-same-level~             | next same level header           |
| ~gh~             | ~org-up-element~                              | go org last level header         |
| ~gf~             | ~+lookup/file~                                | find file with name under cursor |
| ~gr~             | ~evil-region~                                 | execute region code              |
| ~gt~             | ~+workspace:switch-next~                      | -                                |
| ~gu~             | ~evil-downcase~                               |                                  |
| ~gx~             | ~evil-exchange~                               |                                  |
| ~g;~             | ~goto-last-change~                            | -                                |
| ~g$~             | ~evil-end-of-visual-line~                     | -                                |
| ~g-~             | ~evil-numbers/dec-at-pt~                      | decrement number under cursor    |
| ~g=~             | ~evil-numbers/inc-at-pt~                      | increase number under cursor     |
| ~g~~             | ~evil-invert-case~                            | invert case(down-up)             |
| ~g0~             | ~evil-beginning-of-visual-line~               | -                                |
| ~g[~             | ~beginning-of-defun~                          | -                                |
| ~g]~             | ~end-of-defun~                                | -                                |
|------------------+-----------------------------------------------+----------------------------------|
| *lookup def/ref* |                                               |                                  |
| ~gd~             | ~+lookup/definition~                          | -                                |
| ~gD~             | ~+lookup/references~                          | -                                |
|------------------+-----------------------------------------------+----------------------------------|
| *char jump*      |                                               |                                  |
| ~gss~            | ~evil-avy-goto-char-2~                        | jump by char1-2 input            |
| ~gs/~            | ~evil-avy-goto-char-timer~                    | jump by a char                   |
|------------------+-----------------------------------------------+----------------------------------|
| *line jump*      |                                               |                                  |
| ~gsj~            | ~evilem-motion-next-line~                     | jump line below current row      |
| ~gsk~            | ~evilem-motion-previous-line~                 | jump line upon current row       |
| ~gs+~            | ~evilem-motion-next-line-first-non-blank~     | jump next non blank line         |
| ~gs-~            | ~evilem-motion-previous-line-first-non-blank~ | jump previous non blankl line    |
| ~gsgk~           | ~evilem-motion-previous-visual-line~          | -                                |
| ~gsgj~           | ~evilem-motion-next-visual-line~              | -                                |
|------------------+-----------------------------------------------+----------------------------------|
| *section jump*   |                                               |                                  |
| ~gs[[~           | ~evilem-motion-backward-section-begin~        | jump backward section begin      |
| ~gs[]~           | ~evilem-motion-backward-section-end~          | jump backward section end        |
| ~gs]]~           | ~evilem-motion-forward-section-begin~         | -                                |]
| ~gs[~           | ~evilem-motion-forward-section-end~           | -                                |

**** z(fold/unfold)

| key  | function                  | description |
|------+---------------------------+-------------|
| ~za~ | ~evil-toggle-fold~        |             |
| ~zo~ | ~evil-open-fold~          |             |
| ~zj~ | ~evil-fold-next~          |             |
| ~zk~ | ~evil-fold-previous~      |             |
| ~zr~ | ~evil-open-folds~         |             |
| ~zm~ | ~evil-close-folds~        |             |
| ~zt~ | ~evil-scroll-line-to-top~ |             |
| ~zx~ | ~kill-current-buffer~     |             |
* Spaceamcs
我的 Spacemacs 配置文件，参考配置来源于 [[https://github.com/zilongshanren/spacemacs-private][子龙山人]] 的配置方案(进行了部分删减)，我的完整配置文档链接[[https://github.com/gcclll/.emacs.d/tree/space/layers/zcheng][🛬🛬🛬]]。
** Awesome/有趣/实用

| key       | function   | description                       |
|-----------+------------+-----------------------------------|
| ~SPC i s~ | ivy-yas    | 插入 snippet 实时显示要插入的内容 |
| ~C-c i m~ | helm-imenu | 函数，变量列表                    |
|           |            |                                   |

~SPC i s~

  [[http://qiniu.ii6g.com/img/20200919230430.png]]
** Key bindings

  我的自定义按键：

  | Key Binding | Description                                                                  |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC a m n~ | emms-next                                                                    |
  | ~SPC a m p~ | emms-previous                                                            |
  |-------------+------------------------------------------------------------------------------|
  |             |                                                                              |
  | ~SPC b i~   | ibuffer                                                                      |
  | ~SPC b D~   | spacemacs/kill-other-buffers                                                 |
  | ~SPC b m s~ | bookmark-set                                                                 |
  | ~SPC b m r~ | bookmark-rename                                                              |
  | ~SPC b m d~ | bookmark-delete                                                              |
  | ~SPC b m j~ | counsel-bookmark                                                             |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC d d~   | dash-at-point                                                                |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC e n~   | flycheck-next-error                                                          |
  | ~SPC e p~   | flycheck-previous-error                                                      |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC f d~   | projectile-find-file-dwim-other-window                                       |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC g g~   | magit                                                                        |
  | ~SPC g L~   | magit-log-buffer-file, show git logs                                         |
  | ~SPC g n~   | smerge-next                                                                  |
  | ~SPC g p~   | smerge-prev                                                                  |
  | ~SPC g M~   | git-messenger:popup-message, show git log message, with `f' open in browser. |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC h h~   | zilongshanren/highlight-dwim                                                 |
  | ~SPC h c~   | zilongshanren/clearn-highlight, TODO                                         |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC o o~   | zilongshanren/helm-hotspots                                                  |
  | ~SPC o x~   | org-open-at-point-global, open link                                          |
  | ~SPC o r~   | zilongshanren/browser-refresh--chrome-applescript                            |
  | ~SPC o s~   | spacemacs/search-engine-select, open search engine list to search            |
  | ~SPC o g~   | my-git-timemachine, git record                                               |
  | ~SPC o !~   | zilongshanren/iterm-shell-command, go current dir & run command              |
  | ~SPC o e~   | tiny-expand                                                                  |
  | ~SPC o i~   | org-mode insert command                                                      |
  | ~SPC o i t~ | org-set-tags-command, --> :done:                                             |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC p b~   | counsel-projectile-switch-to-buffer                                          |
  | ~SPC p t~   | my-simple-todo                                                               |
  | ~SPC p f~   | zilongshanren/open-file-with-projectile-or-counsel-git                       |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC r l~   | ivy-resume, resume last search result                                        |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC s j~   | counsel-jump-in-buffer                                                       |
  |-------------+------------------------------------------------------------------------------|
  | ~SPC y i~   | yas/insert-snippet                                                           |
  | ~SPC y d~   | youdao-dictionary-search-at-point+                                           |
  |-------------+------------------------------------------------------------------------------|
  | ~C-c l~     | zilongshanren/insert-chrome-current-tab-url                                  |
  | ~C-c t~     | org-capture                                                                  |
  | ~C-c r~     | vr/replace                                                                   |
  | ~C-c q~     | vr/query-replace                                                             |
  |-------------+------------------------------------------------------------------------------|
  | ~M--~       | zilongshanren/goto-match-paren                                               |
  | ~M-i~       | string-inflection-java-style-cycle                                           |
  | ~M-'~       | avy-goto-char-2                                                              |
  |-------------+------------------------------------------------------------------------------|
  | ~s-p~       | find-file-in-project                                                         |
  |-------------+------------------------------------------------------------------------------|
  | ~, '~       | ielm, lisp-repl                                                              |
  | ~, g d~     | xref-find-definition                                                         |
  | ~, g b~     | xref-pop-marker-stack                                                        |
  |-------------+------------------------------------------------------------------------------|
  | ~+~         | evil-numbers/inc-at-pt，number +1                                            |
  | ~-~         | evil-numbers/dec-at-pt, number -1                                            |
  |-------------+------------------------------------------------------------------------------|
  | ~g [~       | beginning-of-defun                                                           |
  | ~g ]~       | end-of-defun                                                                 |
  |-------------+------------------------------------------------------------------------------|
  | ~z [~       | sp-wrap-square                                                               |
  | ~z (~       | sp-wrap-round                                                                |
  | ~z {~       | sp-wrap-curly                                                                |
  | ~z -~       | sp-splice-sexp                                                               |
  | ~z .~       | emmet-wrap-with-markup                                                       |
  |-------------+------------------------------------------------------------------------------|

*** vue-mode
   [[https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Bframeworks/vue][vue-mode-key-bindings]]

*** smartparens(括号操作)

| key   | function               |
|-------+------------------------|
| =C-(= | sp-backward-slurp-sexp |
| =s-(= | sp-backward-barf-sexp  |
| =C-)= | sp-forward-slurp-sexp  |
| =s-)= | sp-forward-barf-sexp   |
| =C-{= | sp-backward-sexp       |
| =C-}= | sp-forward-sexp        |

*** move-text, up/down

| key   | function      |
|-------+---------------|
| ~s-<~ | move-text-up  |
| ~s->~ | move-text-down |

** Modes
*** emms, play music
#+begin_src elisp
  (spacemacs/set-leader-keys "ama" 'emms-add-directory-tree)
  (spacemacs/set-leader-keys "ame" 'emms-smart-browse)
  (spacemacs/set-leader-keys "aml" 'emms-play-playlist)
  (spacemacs/set-leader-keys "amn" 'emms-next)
  (spacemacs/set-leader-keys "amp" 'emms-previous)
  (spacemacs/set-leader-keys "amP" 'emms-pause)
  (spacemacs/set-leader-keys "ams" 'emms-start)
  (spacemacs/set-leader-keys "amS" 'emms-stop)
  (spacemacs/set-leader-keys "amt" 'emms-toggle-repeat-playlist)
#+end_src

| key         | function                     |
|-------------+------------------------------|
| ~SPC a m a~ | 'emms-add-directory-tree     |
| ~SPC a m e~ | 'emms-smart-browse           |
| ~SPC a m l~ | 'emms-play-playlist          |
| ~SPC a m n~ | 'emms-next                   |
| ~SPC a m p~ | 'emms-previous               |
| ~SPC a m P~ | 'emms-pause                  |
| ~SPC a m s~ | 'emms-start                  |
| ~SPC a m S~ | 'emms-stop                   |
| ~SPC a m t~ | 'emms-toggle-repeat-playlist |
|             |                              |
*** DONE ranger
   CLOSED: [2020-08-27 Thu 21:14]

   - State "DONE"       from              [2020-08-27 Thu 21:14]
   | key       | function               |
   |-----------+------------------------|
   | ~SPC a r~ | open ranger            |
   | ~q~       | quit                   |
   | ~j~       | move down              |
   | ~k~       | move up                |
   | ~l~       | into current directory |
   | ~h~       | up to parent dir       |

   file manangement:

   | key          | function                                    |
   |--------------+---------------------------------------------|
   | ~r~          | revert buffer                               |
   | ~R~          | rename                                      |
   | ~D~          | delete                                      |
   | ~yy~         | copy                                        |
   | ~pp~         | paste                                       |
   | ~f~          | search file names                           |
   | ~i~          | toggle showing literal / full-text previews |
   | ~zh~         | toggle dot files                            |
   | ~o~          | sort options                                |
   | ~H~          | search through history                      |
   | ~z-~ or ~z+~ | reduce/increase parents                     |
   | ~C-SPC~      | mark a file or directory                    |
   | ~v~          | toggle mark                                 |
   | ~V~          | visually select lines                       |
   | ~;C~         | copy / move directory                       |
   | ~;+~         | create directory                            |
   | ~SPC a d~    | deer                                        |
   | ~C-j~        | scroll preview window down                  |
   | ~C-k~        | scroll preview window up                    |
   | ~S~          | enter shell                                 |

*** org-mode

   ref: https://practicalli.github.io/spacemacs/org-mode/

   | key     | function     |
   |---------+--------------|
   | ~, i p~ | set property |
   |         |              |

**** text-style

    ~code: , x c~

    /italic: , x i/

    +line-throught: , x s+

    _underline: , x u_

    =verbatim: , x v=

    *bold: , x b*
**** checkbox
    - [ ] todo one, =C-c C-c= change status
    - [X] todo two, done
    - [X] todo three

**** todos
***** TODO todo one
     SCHEDULED: <2020-08-27 Thu>
***** WAITING todo two waiting

     - State "WAITING"    from "TODO"       [2020-08-25 Tue 14:46] \\
       --
***** todo scheduler
     SCHEDULED: <2020-08-25 Tue>
*** TODO tiny, SPC o e
   https://github.com/abo-abo/tiny

*** TODO multiple-cursors
*** TODO prodigy
   blog settings.


*** TODO wrap-region
   
   https://github.com/rejeep/wrap-region.el/blob/master/wrap-region.el

** Misc Settings

*超过 80 列自动换行* ：

#+begin_src elisp
  (add-hook 'org-mode-hook 'turn-on-auto-fill)
  (setq-default fill-column 80)
#+end_src

*自动缩进*:

~(global-aggressive-indent-mode)~

** Issues
*** Points
**** org-mode 简介
    1. Jump to inner link: ~<<text>> <- [[test][text]]~
